const h="BOX SNAKE",f=`
[Hold] Stretch
`,x=[],v={theme:"pixel",isPlayingBgm:!0,isReplayEnabled:!0,audioSeed:5},l=9,i=7;let e,p,c,a,n;function y(){ticks||(e={head:{edge:1,pos:.5},tail:{edge:1,pos:.5},isStretching:!1,length:0,turret:{edge:1,pos:.5,ticks:0}},p=[],c=[],a=0,n=1);const r=sqrt(difficulty);if(u(),color("blue"),remove(p,t=>{if(t.pos.addWithAngle(t.angle,3*r),bar(t.pos,2*r,3*r,t.angle).isColliding.rect.light_blue)return!0}),input.isJustPressed&&play("select"),input.isJustReleased&&play("laser"),input.isPressed?(e.head.pos+=.01*r,e.length>3&&e.head.edge===e.tail.edge&&e.head.pos>=e.tail.pos&&(e.turret.pos=e.head.pos,e.turret.edge=e.head.edge,play("coin"),n++),e.head.pos>=1&&(e.head.pos-=1,e.head.edge=wrap(e.head.edge+1,0,4)),e.isStretching=!0):e.isStretching&&(e.tail.pos+=.1*r,e.length<1&&e.tail.edge===e.head.edge&&e.tail.pos>=e.head.pos?(e.isStretching=!1,e.tail.pos=e.head.pos):e.tail.pos>=1&&(e.length>=.1*r?(e.tail.pos-=1,e.tail.edge=wrap(e.tail.edge+1,0,4)):(e.isStretching=!1,e.tail.edge=wrap(e.tail.edge+1,0,4),e.tail.pos=e.head.pos))),g(),e.turret.pos-=.01,color("transparent"),box(o(e.turret.edge,e.turret.pos),3,3).isColliding.rect.green?e.turret.pos<=0&&(e.turret.pos+=1,e.turret.edge=wrap(e.turret.edge-1,0,4)):(e.turret.pos=e.head.pos,e.turret.edge=e.head.edge),e.turret.ticks--,e.turret.ticks<0){const t=o(e.turret.edge,e.turret.pos),s=(e.turret.edge+2)*PI/2;p.push({pos:t,angle:s}),color("blue"),particle(t,{count:2,speed:2,angle:s,angleWidth:.3}),e.turret.ticks=3}if(a-=r,a<0){const t=vec(rnd(20,80),rnd(20,80)),s=t.angleTo(50,50);c.push({pos:t,vel:vec(rnd(.5,1)*r,0).rotate(s+rnds(.2))}),a+=rnd(9,99)}color("red"),remove(c,t=>{t.pos.add(t.vel);const s=box(t.pos,4).isColliding.rect;if(s.blue)return play("powerUp"),addScore(Math.ceil(e.length*10)*n,t.pos),particle(t.pos),!0;s.green&&(play("explosion"),end()),t.pos.x<l&&t.vel.x<0&&(t.vel.x*=-1),t.pos.x>100-l&&t.vel.x>0&&(t.vel.x*=-1),t.pos.y<l&&t.vel.y<0&&(t.vel.y*=-1),t.pos.y>100-l&&t.vel.y>0&&(t.vel.y*=-1)}),color("black"),text(`x${n}`,3,9,{isSmallText:!0})}function g(){color("green");let r=e.head.edge,t=e.head.pos,s=e.tail.pos;e.length=0;for(let d=0;d<5;d++){if(r===e.tail.edge)if(t>=s){s=e.tail.pos,line(o(r,t),o(r,s)),e.length+=t-s;break}else if(d===0)s=0,line(o(r,t),o(r,s)),e.length+=t-s,t=1;else{t=e.tail.pos,line(o(r,t),o(r,s)),e.length+=t-s;break}else s=0,line(o(r,t),o(r,s)),e.length+=t-s,t=1;r=wrap(r-1,0,4)}color("white"),box(o(e.head.edge,e.head.pos),1,1)}function o(r,t){switch(r){case 0:return vec(100-l,(100-l*2)*t+l);case 1:return vec(100-l-(100-l*2)*t,100-l);case 2:return vec(l,100-l-(100-l*2)*t);case 3:return vec((100-l*2)*t+l,l)}}function u(){color("light_blue"),rect(l-i,l-i,100-(l-i)*2,i),rect(l-i,l-i,i,100-(l-i)*2),rect(l-i,100-l,100-(l-i)*2,i),rect(100-l,l-i,i,100-(l-i)*2)}export{x as characters,f as description,v as options,h as title,y as update};
