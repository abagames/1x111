const h="TURBULENT",P=`
[Tap] Jump
`,I=[],b={theme:"dark",isPlayingBgm:!0,isReplayEnabled:!0,audioSeed:4};let y,p,c,x,e,d;function m(){ticks||(y=times(7,t=>({height:rnd(10,30),angle:t%2*PI+rnds(PI/4),va:rnd(.01,.02),x:t*20-20})),p=times(25,t=>vec()),c=[],x=0,e={pos:vec(40,60),pp:vec(40,60),vel:vec(),angle:0,state:"float"});let i=.1*difficulty;e.pos.x>50&&(i+=(e.pos.x-50)*.1),y.forEach((t,l)=>{t.x-=i,t.x<-20&&(t.x+=140,t.height=rnd(10,30),t.angle=rnd(PI*2),t.va=rnd(.01,.02*sqrt(difficulty))),t.angle+=t.va,p[l*4].set(t.x,60+sin(t.angle)*t.height)}),color("blue"),p.forEach((t,l)=>{const n=l%4;if(n!==0){let a=p[floor(l/4)*4],g=p[(floor(l/4)+1)*4];const v=[.2,.5,.8][n-1];t.set(a.x+5*n,a.y*(1-v)+g.y*v)}let s=p[wrap(l-1,0,p.length)];s.x<t.x&&line(s,t)}),x-=i,x<0&&(c.push({x:103,vx:0}),x=rnd(100,120)/sqrt(difficulty)),color("red"),remove(c,t=>{t.x-=i;const[l,n]=u(t.x);if(n==null)return!0;const s=n.y-l.y;t.vx+=s*.001,t.vx*=.9,t.x+=t.vx*sqrt(difficulty);const a=(t.x-l.x)/(n.x-l.x);return text("*",t.x,l.y+s*a-5),t.x<-3});let o;if(e.state==="float"){const[t,l]=u(e.pos.x);if(l!=null){const n=l.y-t.y;e.vel.x+=n*.002,e.vel.x*=.925,e.vel.x+=.025,e.pos.x+=e.vel.x;const s=(e.pos.x-t.x)/(l.x-t.x);e.pos.y=t.y+n*s,o=t.angleTo(l)}input.isJustPressed&&(play("jump"),d=e.pos.x,e.vel.x=(e.pos.x-e.pp.x)*2,e.vel.y=(e.pos.y-e.pp.y)*5,e.vel.addWithAngle(o-PI/2,1),e.vel.y>-1&&(e.vel.y=-1),e.pos.add(e.vel),e.state="jump")}else d-=i,e.vel.x+=.005,e.vel.y+=input.isPressed?.02:.1,e.vel.mul(.98),e.pos.add(e.vel),o=e.vel.angle;e.pos.x-=i,e.pos.clamp(5,95,5,95),e.pp.set(e.pos),e.angle+=wrap(o-e.angle,-PI,PI)*.1,o=e.angle;const r=vec(e.pos);r.addWithAngle(o-PI*.5,2),color("red"),bar(r,3,2,o),r.addWithAngle(o-PI*.4,2),color("black"),bar(r,4,2,o),r.addWithAngle(o-PI*.6,2);const f=bar(r,1,2,o).isColliding;if(e.state==="jump"&&f.rect.blue){const t=e.pos.x-d;play("hit"),t>0&&(play("powerUp"),addScore(ceil(sqrt(t*t)),e.pos)),e.state="float",e.vel.x*=.5}f.text["*"]&&(play("explosion"),end());function u(t){let l,n;for(let s=0;s<p.length;s++)if(l=p[wrap(s-1,0,p.length)],n=p[s],!(l.x>n.x)&&l.x<=t&&t<n.x)return[l,n];return[void 0,void 0]}}export{I as characters,P as description,b as options,h as title,m as update};
