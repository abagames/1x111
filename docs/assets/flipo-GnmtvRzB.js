const v="FLIP O",x=`
[Tap] Flip
`,m=[],C={theme:"shapeDark",isPlayingBgm:!0,isReplayEnabled:!0,isDrawingScoreFront:!0,audioSeed:3};let i,p,a,u;const c=2,P=12,d=vec(9,5),h=8;function k(){ticks||(i=[{pos:vec(80,10),pp:vec(80,10),vel:vec(1,0),angle:rnd(PI*2),multiplier:1}],p=0,a=[],u=0);let f=0;a.forEach(e=>{color(e.hasBall?"red":"cyan"),box(e.pos,d),e.pos.y>f&&(f=e.pos.y)});let n=f<29?(30-f)*.1:sqrt(difficulty)*.02;input.isJustPressed&&(play("laser"),n+=sqrt(difficulty)*.3*i.length,p=(p+1)%2),color("light_cyan"),rect(5,0,90,5),color("light_blue"),rect(0,0,5,99),rect(95,0,5,99),color("blue");let r=bar(7,75,25,3,.5,0).isColliding.rect;r={...r,...bar(94,75,25,3,PI-.5,0).isColliding.rect},color("purple");const g=p===0?.5:-.5;r={...r,...bar(33,88,P,3,g,0).isColliding.rect};const I=p===0?PI+.5:PI-.5;for(r={...r,...bar(68,88,P,3,I,0).isColliding.rect},(r.cyan||r.red)&&(color("red"),bar(7,75,25,3,.5,0),bar(94,75,25,3,PI-.5,0),play("explosion"),end()),input.isJustPressed&&(p===0?bar(68,88,P,3,PI,0):bar(33,88,P,3,0,0)),remove(i,e=>{e.pp.set(e.pos),e.pp.y+=n,e.vel.y+=.1,e.vel.mul(.99),e.pos.add(vec(e.vel).mul(sqrt(difficulty)*.5)),e.pos.y+=n,e.angle+=e.vel.x*.03+e.vel.y*.02,color("black");const l=arc(e.pos,c,3,e.angle,e.angle+PI*2).isColliding.rect;if(l.red||l.cyan){addScore(e.multiplier*i.length,e.pos),e.multiplier++,color("transparent");const s=arc(e.pp.x,e.pos.y,c).isColliding.rect,t=arc(e.pos.x,e.pp.y,c).isColliding.rect;s.red||s.cyan||o(e,e.vel.x>0?-PI:0),t.red||t.cyan||o(e,e.vel.y>0?-PI/2:PI/2)}if(l.light_cyan&&(play("hit"),o(e,PI/2,"light_cyan")),l.light_blue&&(play("hit"),o(e,e.pos.x<50?0:PI,"light_blue")),l.blue&&o(e,e.pos.x<50?.5-PI/2:PI-.5+PI/2,"blue"),l.purple)if(input.isJustPressed){play("jump");const s=vec(e.pos),t=p===1?.5:-.5,y=p===1?PI+.5:PI-.5;o(e,e.pos.x<50?t-PI/2:y+PI/2,"purple"),o(e,-PI/2,"purple"),o(e,e.pos.x<50?g-PI/2:I+PI/2,"purple"),e.vel.add(vec(e.pos).sub(s)),e.multiplier=1}else o(e,e.pos.x<50?g-PI/2:I+PI/2,"purple");if(e.pos.y>99+c)return play("select"),!0}),i.length===0&&(play("explosion"),end()),i.forEach(e=>{i.forEach(l=>{l===e||l.pos.distanceTo(e.pos)>c*2||o(e,l.pos.angleTo(e.pos))})}),color("transparent"),remove(a,e=>{if(e.pos.y+=n,box(e.pos,d).isColliding.rect.black)return e.hasBall?(play("powerUp"),i.push({pos:vec(e.pos),pp:vec(e.pos),vel:vec(1,0).rotate(PI*2),angle:rnd(PI*2),multiplier:1})):play("coin"),!0}),u-=n;u<0;){let e=(d.x+1)/2;const l=-u,s=.1/i.length;for(let t=0;t<h/2;t++)rnd()<.5&&(a.push({pos:vec(50-e,l),hasBall:rnd()<s}),a.push({pos:vec(50+e,l),hasBall:rnd()<s})),e+=d.x+1;u+=d.y+1}function o(e,l,s){const t=wrap(e.vel.angle-l-PI,-PI,PI);if(abs(t)<PI/2&&e.vel.addWithAngle(l,e.vel.length*cos(t)*1.7),s!=null){color("transparent");for(let y=0;y<9&&(e.pos.addWithAngle(l,1),!!arc(e.pos,c).isColliding.rect[s]);y++);}}}export{m as characters,x as description,C as options,v as title,k as update};
