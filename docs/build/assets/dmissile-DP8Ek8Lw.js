const u="D MISSILE",g=`
[Tap]  Launch
[Hold] Turn
`,v=[],h={isPlayingBgm:!0,isReplayEnabled:!0,audioSeed:2};let o,n,c,t,r,s;const a=-PI/9*8,f=vec(60,90);function m(){if(ticks||(o=[],n=0,c=0,t=[],r=0,s=1),input.isJustPressed&&(play("select"),r=t.length===0?99:t.length>=3?0:9),r--,input.isJustReleased&&r>0&&(play("coin"),t.push({pos:vec(f),angle:a,speed:.5*sqrt(difficulty)}),s*=.9,s<1&&(s=1)),remove(t,e=>(e.pos.addWithAngle(e.angle,e.speed),e.speed*=1.002,input.isPressed&&(e.angle+=e.speed*(e.speed<3*sqrt(difficulty)?.1:.01)),color("purple"),box(vec(e.pos).addWithAngle(e.angle,-3),5),color("blue"),bar(e.pos,3,3,e.angle),!e.pos.isInRect(-3,-3,106,93))),t.length<3&&(color("blue"),bar(f,3,3,a)),color("light_black"),rect(0,90,100,10),o.length===0&&(n=0),n--,n<0){const e=rndi(3,6);times(e,()=>{const i=vec(rnd(10,90),-rnd(5,25)),d=vec(rnd(1,sqrt(difficulty))*.1).rotate(i.angleTo(rnd(10,90),90)),l=rnd()<sqrt(difficulty)?ceil(rnd(300,400)/sqrt(difficulty)):999;o.push({pos:i,vel:d,from:vec(i),ticks:l,id:c,isRemoving:!1}),c++}),n=150/sqrt(difficulty)*e}remove(o,e=>{if(e.isRemoving)return!0;if(e.ticks>0&&(e.pos.add(e.vel),e.ticks--,e.ticks===0)){play("hit");const i=rndi(2,5);times(i,d=>{const l=vec(e.pos),p=vec(e.vel.length).rotate(l.angleTo(rnd(10,90),90));o.push({pos:l,vel:p,from:vec(l),ticks:999,id:d===0?e.id:c,isRemoving:!1}),c++})}if(color("light_black"),line(e.from,e.pos,2),e.ticks>0&&(color("red"),box(e.pos,4).isColliding.rect.blue))return play("powerUp"),addScore(floor(s),e.pos),particle(e.pos),s+=1/clamp(t.length,1,99),o.forEach(i=>{i.id===e.id&&(i.isRemoving=!0)}),!0;e.pos.y>90&&(play("explosion"),end())}),color("black"),text(`x${floor(s)}`,3,9)}export{v as characters,g as description,h as options,u as title,m as update};
