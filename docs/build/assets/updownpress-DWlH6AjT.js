const P="UP DOWN PRESS",W=`
[Tap]  Jump
[Hold] Speed up
`,A=[],C={viewSize:{x:200,y:100},isPlayingBgm:!0,isReplayEnabled:!0,audioSeed:3};let a,c,v,f,i,t,y;const r=5,S=1;function j(){ticks||(a=[{from:vec(0,50),to:vec(100,50),angle:0}],c=-250,v=[],f=0,i=vec(),t={pos:vec(20,50),vy:0,vx:0,angle:0,speed:1,state:"ground"},y=1),i.set(difficulty*.1),t.pos.x>50&&(i.x+=(t.pos.x-50)*.1);const[g,z]=x(t.pos.x+50);for(g<60?i.y+=(g-60)*.1:g>90&&(i.y+=(g-90)*.1),c-=i.x;c<0;){const e=a[a.length-1],l=vec(e.to);let s=vec(e.to);const n=rnd(20,60);s.x+=n,e.from.y-e.to.y===0&&(s.y+=rnds(.4,1.1)*n),a.push({from:l,to:s,angle:l.angleTo(s)}),c+=n}color("light_black"),remove(a,e=>(e.from.sub(i),e.to.sub(i),line(e.from,e.to),e.to.x<-50)),t.pos.x+=t.speed*sqrt(difficulty)-i.x+t.vx,t.vx*=.9,t.pos.x<0&&(play("lucky"),end());const[m,b]=x(t.pos.x);t.state==="jump"&&t.pos.y>m&&(t.state="ground"),t.state==="ground"&&(t.pos.y=m,t.speed+=r*t.angle*.02,t.angle+=(b-t.angle)*.025,input.isJustPressed&&(play("jump"),t.state="jump",t.vy=-2,y=1)),t.state==="jump"&&(t.pos.y+=t.vy*sqrt(difficulty),t.vy+=input.isPressed?.05:.2,t.angle+=(atan2(t.vy,t.speed)-t.angle)*.05),t.speed+=(S*(input.isPressed?2.5:.5)-t.speed)*.1;const o=vec(t.pos);o.addWithAngle(t.angle,r*.6);const d=r;if(color("blue"),box(o.x,o.y-d/2,d),o.addWithAngle(t.angle,r*-1.2),box(o.x,o.y-d/2,d),color("cyan"),o.set(t.pos),o.addWithAngle(t.angle-PI/2,d),bar(o,r,r,t.angle),o.addWithAngle(t.angle-PI/4*3,d*.5),bar(o,r/2,r,t.angle),f-=i.x,f<0){a[a.length-1];const e=rnd(.3,1+sqrt(difficulty)),l=e>2.5?-5:205;v.push({x:l,vx:0,size:rnd(5,8),speed:e,currentSpeed:0,angle:0,color:["red","yellow","green","purple"][rndi(4)]}),f+=rnd(100,120)/sqrt(difficulty)}remove(v,e=>{e.x+=e.currentSpeed*sqrt(difficulty)-i.x;const[l,s]=x(e.x);if(e.currentSpeed+=e.size*e.angle*.02,e.currentSpeed+=(e.speed-e.currentSpeed)*.1,l==null)return!0;e.angle+=(s-e.angle)*.025;const n=vec(e.x,l);n.addWithAngle(e.angle,e.size*.6);const p=e.size;color("black"),box(n.x,n.y-p/2,p),n.addWithAngle(e.angle,e.size*-1.2),box(n.x,n.y-p/2,p),color(e.color),n.set(e.x,l),n.addWithAngle(e.angle-PI/2,p);let u=bar(n,e.size,e.size,e.angle).isColliding.rect;n.addWithAngle(e.angle-PI/4*3,p*.5),u={...u,...bar(n,e.size/2,e.size,e.angle).isColliding.rect};const h=t.state==="jump"&&t.vy>=0;if(h&&(u.cyan||u.blue))return play("powerUp"),addScore(y,n),y<16&&(y*=2),particle(n),t.vy=-2,!0;!h&&u.cyan&&(t.vx=-e.size-t.speed*1.5,play("explosion"),color("cyan"),particle(t.pos,9,2,0,1))});function x(e){let l=[void 0,void 0];return a.forEach(s=>{s.from.x<=e&&e<s.to.x&&(l=[(s.from.y-s.to.y)*(e-s.to.x)/(s.from.x-s.to.x)+s.to.y,s.angle])}),l}}export{A as characters,W as description,C as options,P as title,j as update};
