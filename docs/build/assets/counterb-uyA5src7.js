const u="COUNTER B",f=`
[Hold] Beam
`,g=[],b={theme:"pixel",viewSize:{x:200,y:100},isPlayingBgm:!0,isReplayEnabled:!0,audioSeed:4};let r,t,e,s,a,l;function m(){ticks||(e={pos:vec(20,60),speed:0,beamLength:0,baseX:30,invincibleTicks:0},r=[],t=9,s={pos:void 0,radius:0,enemy:void 0},l=1,a=0);const o=(e.pos.x-e.baseX)*.1;e.baseX+=(30-e.baseX)*.001,e.pos.x<0&&(play("explosion"),e.pos.x=0,end()),color("yellow"),rect(0,90,200,10),a=wrap(a-o,0,200),color("white"),rect(a,90,2,10);const c=4*sqrt(difficulty);if(e.speed+=((input.isPressed?.2:2)*sqrt(sqrt(difficulty))-e.speed)*.2,e.pos.x+=e.speed-o,s.pos==null?input.isPressed?(e.beamLength<=0&&(play("select"),color("cyan"),particle(e.pos,20,3,0,.3)),e.beamLength=clamp(e.beamLength+c,0,300)):e.beamLength=0:(e.beamLength=s.pos.x-e.pos.x,e.beamLength<0&&s.enemy!=null&&(s.enemy.beamLength=-9999,s.enemy=void 0)),e.beamLength>0&&(color("light_cyan"),rect(e.pos.x,e.pos.y-1,e.beamLength,3),color("cyan"),box(e.pos.x+e.beamLength,e.pos.y,5)),s.pos!=null&&(s.pos.x-=o,color("purple"),arc(s.pos,s.radius,6,ticks*.1,ticks*.1+PI*2),particle(s.pos,1,s.radius*.1),s.enemy==null?(s.radius-=sqrt(difficulty)*2,s.radius<1&&(s.pos=void 0)):(s.radius=clamp(s.radius+(input.isPressed?1:-2)*sqrt(difficulty),0,30),s.radius<1&&(s.enemy!=null&&(s.enemy.beamLength=-9999),s.pos=void 0))),t--,t<0){const i=rnd()<.6?vec(rnd(150,300),-5):vec(205,rnd(85)),n=rnd()<.05?vec(e.pos.x+9,e.pos.y):vec(i.x-rnd(30,150),e.pos.y);r.push({pos:i,angle:i.angleTo(n),speed:rnd(1,sqrt(difficulty)),beamLength:-rnd(sqrt(difficulty)*20)}),t=rnd(30,40)/difficulty}remove(r,i=>{if(i.pos.addWithAngle(i.angle,i.speed),i.pos.x-=o,s.enemy===i&&s.pos!=null?(i.beamLength=i.pos.distanceTo(s.pos),i.speed*=.8):(i.beamLength+=c*.2,i.beamLength-c*.3<0&&i.beamLength>=0&&(play("laser"),color("red"),particle(i.pos,9,3,i.angle,.5))),i.beamLength>0){color("light_red");const p=vec(i.pos).addWithAngle(i.angle,i.beamLength);line(i.pos,p),color("red");const d=box(p,5).isColliding.rect;s.pos==null&&d.cyan&&(play("powerUp"),l=1,s.pos=vec(e.pos.x+e.beamLength,e.pos.y),s.enemy=i,s.radius=1,color("purple"),particle(s.pos,30,5)),s.enemy!==i&&(d.purple||p.y>90||p.x<-99)&&(i.beamLength=-9999)}color("black"),bar(vec(i.pos).addWithAngle(i.angle+PI/5*4,3),1,2,i.angle);const n=bar(i.pos,2,3,i.angle).isColliding.rect;return n.purple||n.light_cyan?(n.purple?(play("coin"),addScore(l,i.pos),l<64&&(l*=2)):play("hit"),particle(i.pos),s.enemy===i&&(s.enemy=void 0),!0):(i.beamLength<-999&&(i.speed<1&&(i.speed+=(1-i.speed)*.1),i.angle>0&&(i.angle+=(PI-i.angle)*.05)),i.pos.x<-5)}),color(e.invincibleTicks>0&&e.invincibleTicks%10<5?"transparent":"blue"),box(vec(e.pos).addWithAngle(-(PI/5)*4,3),3,2),e.invincibleTicks--,box(e.pos,5,3).isColliding.rect.light_red&&e.invincibleTicks<0&&!(s.pos!=null&&s.pos.distanceTo(e.pos)<s.radius+9)&&(play("explosion"),particle(e.pos,50,4),e.baseX-=10,e.pos.x-=10,e.invincibleTicks=60)}export{g as characters,f as description,b as options,u as title,m as update};
